---
title: "Introduction to R Markdown"
author: "Shih Ching Fu"
date: "ResBaz Perth 2019"
bibliography: ref.bib
---

```{r setup, include=FALSE}
#knitr::opts_chunk$set(echo = FALSE)
```

# Welcome

In this session we'll get a brief introduction to R Markdown.

The materials are taken from:

* [R for Data Science](https://r4ds.had.co.nz/) [@grolemund2017RScience] 
* [R for Reproducible Scientific Analysis](http://swcarpentry.github.io/r-novice-gapminder/) [@wright2016RAnalysis]
* [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/) [@xie2018RGuide]
* [R Markdown](https://rmarkdown.rstudio.com/lesson-1.html) [@rmarkdown]

## Objectives

1. Be able to create a R Notebook from scratch in RStudio
2. Knit a cheatsheet of commonly used R Markdown commands
3. Know where to get further information on more advanced R Markdown usage

## Introduction

During your data analysis work you'll undoubtedly need to produce reports of your analysis and findings. Ideally these should be reproducible documents in the sense that should you wish to update the results, you can simply re-compile the report instead of having to manually reconstruct figures.

R Markdown, via the knitr package, allows us to embed code into documents such that it gets executed and results such as graphs and figures interleaved with text. Documents can be in various formats such as HTML, LaTeX, or Word, and other types such as slideshows, webpages, and even books.

R Markdown files are designed to be used in three ways:

1. For communicating to decision makers, who want to focus on the conclusions, not the code behind the analysis.
2. For collaborating with other data scientists (including future you!), who are interested in both your conclusions, and how you reached them ( i.e. the code).
3. As an environment in which to do data science, as a modern day lab notebook where you can capture not only what you did, but also what you were thinking.


## Creating an R Notebook

1. Launch RStudio
2. File menu
3. New File > R Notebook

## Knitting an R Notebook

When you knit the document, R Markdown sends the .Rmd file to knitr, http://yihui.name/knitr/, which executes all of the code chunks and creates a new markdown (.md) document which includes the code and its output. The markdown file generated by knitr is then processed by pandoc, http://pandoc.org/, which is responsible for creating the finished file. The advantage of this two step workflow is that you can create a very wide range of output formats, as youâ€™ll learn about in R markdown formats.

Click on the Knit button.

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

# Structure of an .Rmd file

- Formatted text
- Code chunks
- YAML header






## Text Formatting

Text in .Rmd files are written in Markdown which is designed to be easy to write and human-readable even before it's converted into HTML or richer formats.

*italic* or _italic_
**bold** or  __bold__
***bold and italic*** or ___bold and italic___ 
`code`
superscript^2^
subscript~2~


### Headings


`# 1st Level Header`

`## 2nd Level Header`

`### 3rd Level Header`


### Lists

* Bulleted list item 1

* Item 2

    * Item 2a

    * Item 2b

1. Numbered list item 1

1.  Item 2. The numbers are incremented automatically in the output.

### Links and Images

<http://example.com>

[linked phrase](http://example.com)

![optional caption text](./rmarkdownflow.png)

### Tables

First Header  | Second Header
------------- | -------------
Content Cell  | Content Cell
Content Cell  | Content Cell

```{r}
head(iris)
```

## LaTeX

Euler's identity, $1 + e^{-\pi i} = 0$, contains five fundamental mathematical constants.


Equations can be put on their own line
$$
P(A_i | B) = \frac{P(B|A_i)P(A_i)}{\sum_j P(B | A_j)P(A_j)}
$$

## Code Chunks

Code chunks are prefixed and suffixed by three back-ticks '`'. The curly brackets contain various parameters and options for the chunk.

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Ctrl+Alt+I*.

` ```{r}`
` summary(iris)`
` ``` `

```{r}
summary(iris)
```

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

### Chunk options

The `r` indicates this chunk contains R code. R Notebooks could run python or bash code if need be. Next comes any R code such as plotting and the chunk is closed by three more back-ticks.

Show only the code but don't execute it and thus have no output

```{r, eval = FALSE}
summary(iris)
```

Show the output but don't show the code:

```{r, echo = FALSE}
summary(iris)
```

Execute the code but don't show results in the report.

```{r, include = FALSE}
summary(iris)
```


## Slide with Plot


```{r}
boxplot(Petal.Length ~ Species, data = iris)
```

```{r fig.height=5, fig.width=5}
boxplot(Petal.Length ~ Species, data = iris)
```

## Inline R code

The `iris` dataset has `r nrow(iris)` rows.

## YAML

The beginning of an R Markdown file looks like this:

`---`
`title: "R Notebook"`
`output: html_notebook`
`---`

Let's add our name as author and today's date.

`---`
`title: "R Notebook"`
`author: "Shih Ching Fu"`  
`date: "4 July 2019"`  
`output: html_notebook`
`---`


## Create a bibliography

`---`
`title: "R Notebook"`
`author: "Shih Ching Fu"`  
`date: "4 July 2019"`  
`output: html_notebook`
`bibliography: ref.bib`
`---`

## References

